<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Fri Aug 15 06:01:29 UTC 2025 -->
<title>LearnerSessionTracker (Apache ZooKeeper - Server 3.10.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-08-15">
<meta name="description" content="declaration: package: org.apache.zookeeper.server.quorum, class: LearnerSessionTracker">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/LearnerSessionTracker.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.zookeeper.server.quorum</a></div>
<h1 title="Class LearnerSessionTracker" class="title">Class LearnerSessionTracker</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="UpgradeableSessionTracker.html" title="class in org.apache.zookeeper.server.quorum">org.apache.zookeeper.server.quorum.UpgradeableSessionTracker</a>
<div class="inheritance">org.apache.zookeeper.server.quorum.LearnerSessionTracker</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../SessionTracker.html" title="interface in org.apache.zookeeper.server">SessionTracker</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">LearnerSessionTracker</span>
<span class="extends-implements">extends <a href="UpgradeableSessionTracker.html" title="class in org.apache.zookeeper.server.quorum">UpgradeableSessionTracker</a></span></div>
<div class="block">The learner session tracker is used by learners (followers and observers) to
 track zookeeper sessions which may or may not be echoed to the leader.  When
 a new session is created it is saved locally in a wrapped
 LocalSessionTracker.  It can subsequently be upgraded to a global session
 as required.  If an upgrade is requested the session is removed from local
 collections while keeping the same session ID.  It is up to the caller to
 queue a session creation request for the leader.
 A secondary function of the learner session tracker is to remember sessions
 which have been touched in this service.  This information is passed along
 to the leader with a ping.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-org.apache.zookeeper.server.SessionTracker">Nested classes/interfaces inherited from interface&nbsp;org.apache.zookeeper.server.<a href="../SessionTracker.html" title="interface in org.apache.zookeeper.server">SessionTracker</a></h2>
<code><a href="../SessionTracker.Session.html" title="interface in org.apache.zookeeper.server">SessionTracker.Session</a>, <a href="../SessionTracker.SessionExpirer.html" title="interface in org.apache.zookeeper.server">SessionTracker.SessionExpirer</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-org.apache.zookeeper.server.quorum.UpgradeableSessionTracker">Fields inherited from class&nbsp;org.apache.zookeeper.server.quorum.<a href="UpgradeableSessionTracker.html" title="class in org.apache.zookeeper.server.quorum">UpgradeableSessionTracker</a></h3>
<code><a href="UpgradeableSessionTracker.html#localSessionsEnabled">localSessionsEnabled</a>, <a href="UpgradeableSessionTracker.html#localSessionTracker">localSessionTracker</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.apache.zookeeper.server.SessionTracker.SessionExpirer,java.util.concurrent.ConcurrentMap,int,long,boolean,org.apache.zookeeper.server.ZooKeeperServerListener)" class="member-name-link">LearnerSessionTracker</a><wbr>(<a href="../SessionTracker.SessionExpirer.html" title="interface in org.apache.zookeeper.server">SessionTracker.SessionExpirer</a>&nbsp;expirer,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;sessionsWithTimeouts,
 int&nbsp;tickTime,
 long&nbsp;id,
 boolean&nbsp;localSessionsEnabled,
 <a href="../ZooKeeperServerListener.html" title="interface in org.apache.zookeeper.server">ZooKeeperServerListener</a>&nbsp;listener)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkSession(long,java.lang.Object)" class="member-name-link">checkSession</a><wbr>(long&nbsp;sessionId,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;owner)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks whether the SessionTracker is aware of this session, the session
 is still active, and the owner matches.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#commitSession(long,int)" class="member-name-link">commitSession</a><wbr>(long&nbsp;sessionId,
 int&nbsp;sessionTimeout)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Synchronized on this to avoid race condition of adding a local session
 after committed global session, which may cause the same session being
 tracked on this server and leader.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createSession(int)" class="member-name-link">createSession</a><wbr>(int&nbsp;sessionTimeout)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dumpSessions(java.io.PrintWriter)" class="member-name-link">dumpSessions</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/PrintWriter.html" title="class or interface in java.io" class="external-link">PrintWriter</a>&nbsp;pwriter)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Text dump of session information, suitable for debugging.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSessionExpiryMap()" class="member-name-link">getSessionExpiryMap</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a mapping of time to session IDs that expire at that time.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#globalSessions()" class="member-name-link">globalSessions</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get a set of global session IDs</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isGlobalSession(long)" class="member-name-link">isGlobalSession</a><wbr>(long&nbsp;sessionId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeSession(long)" class="member-name-link">removeSession</a><wbr>(long&nbsp;sessionId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setOwner(long,java.lang.Object)" class="member-name-link">setOwner</a><wbr>(long&nbsp;sessionId,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;owner)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSessionClosing(long)" class="member-name-link">setSessionClosing</a><wbr>(long&nbsp;sessionId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Mark that the session is in the process of closing.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#shutdown()" class="member-name-link">shutdown</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#snapshot()" class="member-name-link">snapshot</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#start()" class="member-name-link">start</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#touchSession(long,int)" class="member-name-link">touchSession</a><wbr>(long&nbsp;sessionId,
 int&nbsp;sessionTimeout)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#trackSession(long,int)" class="member-name-link">trackSession</a><wbr>(long&nbsp;sessionId,
 int&nbsp;sessionTimeout)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Track the session expire, not add to ZkDb.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.zookeeper.server.quorum.UpgradeableSessionTracker">Methods inherited from class&nbsp;org.apache.zookeeper.server.quorum.<a href="UpgradeableSessionTracker.html" title="class in org.apache.zookeeper.server.quorum">UpgradeableSessionTracker</a></h3>
<code><a href="UpgradeableSessionTracker.html#checkGlobalSession(long,java.lang.Object)">checkGlobalSession</a>, <a href="UpgradeableSessionTracker.html#createLocalSessionTracker(org.apache.zookeeper.server.SessionTracker.SessionExpirer,int,long,org.apache.zookeeper.server.ZooKeeperServerListener)">createLocalSessionTracker</a>, <a href="UpgradeableSessionTracker.html#finishedUpgrading(long)">finishedUpgrading</a>, <a href="UpgradeableSessionTracker.html#getLocalSessionCount()">getLocalSessionCount</a>, <a href="UpgradeableSessionTracker.html#isLocalSession(long)">isLocalSession</a>, <a href="UpgradeableSessionTracker.html#isLocalSessionsEnabled()">isLocalSessionsEnabled</a>, <a href="UpgradeableSessionTracker.html#isTrackingSession(long)">isTrackingSession</a>, <a href="UpgradeableSessionTracker.html#isUpgradingSession(long)">isUpgradingSession</a>, <a href="UpgradeableSessionTracker.html#localSessions()">localSessions</a>, <a href="UpgradeableSessionTracker.html#removeLocalSession(long)">removeLocalSession</a>, <a href="UpgradeableSessionTracker.html#upgradeSession(long)">upgradeSession</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.apache.zookeeper.server.SessionTracker.SessionExpirer,java.util.concurrent.ConcurrentMap,int,long,boolean,org.apache.zookeeper.server.ZooKeeperServerListener)">
<h3>LearnerSessionTracker</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">LearnerSessionTracker</span><wbr><span class="parameters">(<a href="../SessionTracker.SessionExpirer.html" title="interface in org.apache.zookeeper.server">SessionTracker.SessionExpirer</a>&nbsp;expirer,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;&nbsp;sessionsWithTimeouts,
 int&nbsp;tickTime,
 long&nbsp;id,
 boolean&nbsp;localSessionsEnabled,
 <a href="../ZooKeeperServerListener.html" title="interface in org.apache.zookeeper.server">ZooKeeperServerListener</a>&nbsp;listener)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="removeSession(long)">
<h3>removeSession</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">removeSession</span><wbr><span class="parameters">(long&nbsp;sessionId)</span></div>
</section>
</li>
<li>
<section class="detail" id="start()">
<h3>start</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">start</span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="UpgradeableSessionTracker.html#start()">start</a></code>&nbsp;in class&nbsp;<code><a href="UpgradeableSessionTracker.html" title="class in org.apache.zookeeper.server.quorum">UpgradeableSessionTracker</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="shutdown()">
<h3>shutdown</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">shutdown</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isGlobalSession(long)">
<h3>isGlobalSession</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isGlobalSession</span><wbr><span class="parameters">(long&nbsp;sessionId)</span></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="UpgradeableSessionTracker.html#isGlobalSession(long)">isGlobalSession</a></code>&nbsp;in class&nbsp;<code><a href="UpgradeableSessionTracker.html" title="class in org.apache.zookeeper.server.quorum">UpgradeableSessionTracker</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="trackSession(long,int)">
<h3>trackSession</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">trackSession</span><wbr><span class="parameters">(long&nbsp;sessionId,
 int&nbsp;sessionTimeout)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../SessionTracker.html#trackSession(long,int)">SessionTracker</a></code></span></div>
<div class="block">Track the session expire, not add to ZkDb.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sessionId</code> - sessionId</dd>
<dd><code>sessionTimeout</code> - sessionTimeout</dd>
<dt>Returns:</dt>
<dd>whether the session was newly tracked (if false, already tracked)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="commitSession(long,int)">
<h3>commitSession</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">commitSession</span><wbr><span class="parameters">(long&nbsp;sessionId,
 int&nbsp;sessionTimeout)</span></div>
<div class="block">Synchronized on this to avoid race condition of adding a local session
 after committed global session, which may cause the same session being
 tracked on this server and leader.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sessionId</code> - sessionId</dd>
<dd><code>sessionTimeout</code> - sessionTimeout</dd>
<dt>Returns:</dt>
<dd>whether the session was newly added (if false, already existed)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="touchSession(long,int)">
<h3>touchSession</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">touchSession</span><wbr><span class="parameters">(long&nbsp;sessionId,
 int&nbsp;sessionTimeout)</span></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>false if session is no longer active</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="snapshot()">
<h3>snapshot</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name">snapshot</span>()</div>
</section>
</li>
<li>
<section class="detail" id="createSession(int)">
<h3>createSession</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">createSession</span><wbr><span class="parameters">(int&nbsp;sessionTimeout)</span></div>
</section>
</li>
<li>
<section class="detail" id="checkSession(long,java.lang.Object)">
<h3>checkSession</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">checkSession</span><wbr><span class="parameters">(long&nbsp;sessionId,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;owner)</span>
                  throws <span class="exceptions"><a href="../../KeeperException.SessionExpiredException.html" title="class in org.apache.zookeeper">KeeperException.SessionExpiredException</a>,
<a href="../../KeeperException.SessionMovedException.html" title="class in org.apache.zookeeper">KeeperException.SessionMovedException</a></span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../SessionTracker.html#checkSession(long,java.lang.Object)">SessionTracker</a></code></span></div>
<div class="block">Checks whether the SessionTracker is aware of this session, the session
 is still active, and the owner matches. If the owner wasn't previously
 set, this sets the owner of the session.

 UnknownSessionException should never been thrown to the client. It is
 only used internally to deal with possible local session from other
 machine</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../../KeeperException.SessionExpiredException.html" title="class in org.apache.zookeeper">KeeperException.SessionExpiredException</a></code></dd>
<dd><code><a href="../../KeeperException.SessionMovedException.html" title="class in org.apache.zookeeper">KeeperException.SessionMovedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setOwner(long,java.lang.Object)">
<h3>setOwner</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setOwner</span><wbr><span class="parameters">(long&nbsp;sessionId,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&nbsp;owner)</span>
              throws <span class="exceptions"><a href="../../KeeperException.SessionExpiredException.html" title="class in org.apache.zookeeper">KeeperException.SessionExpiredException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../../KeeperException.SessionExpiredException.html" title="class in org.apache.zookeeper">KeeperException.SessionExpiredException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="dumpSessions(java.io.PrintWriter)">
<h3>dumpSessions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dumpSessions</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/PrintWriter.html" title="class or interface in java.io" class="external-link">PrintWriter</a>&nbsp;pwriter)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../SessionTracker.html#dumpSessions(java.io.PrintWriter)">SessionTracker</a></code></span></div>
<div class="block">Text dump of session information, suitable for debugging.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pwriter</code> - the output writer</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setSessionClosing(long)">
<h3>setSessionClosing</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setSessionClosing</span><wbr><span class="parameters">(long&nbsp;sessionId)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../SessionTracker.html#setSessionClosing(long)">SessionTracker</a></code></span></div>
<div class="block">Mark that the session is in the process of closing.</div>
</section>
</li>
<li>
<section class="detail" id="getSessionExpiryMap()">
<h3>getSessionExpiryMap</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;&gt;</span>&nbsp;<span class="element-name">getSessionExpiryMap</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../SessionTracker.html#getSessionExpiryMap()">SessionTracker</a></code></span></div>
<div class="block">Returns a mapping of time to session IDs that expire at that time.</div>
</section>
</li>
<li>
<section class="detail" id="globalSessions()">
<h3>globalSessions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="element-name">globalSessions</span>()</div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../SessionTracker.html#globalSessions()">SessionTracker</a></code></span></div>
<div class="block">Get a set of global session IDs</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2008&#x2013;2025 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
