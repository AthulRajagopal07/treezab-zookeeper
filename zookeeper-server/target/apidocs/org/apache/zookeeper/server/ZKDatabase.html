<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Wed Aug 06 16:50:50 UTC 2025 -->
<title>ZKDatabase (Apache ZooKeeper - Server 3.10.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-08-06">
<meta name="description" content="declaration: package: org.apache.zookeeper.server, class: ZKDatabase">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ZKDatabase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.zookeeper.server</a></div>
<h1 title="Class ZKDatabase" class="title">Class ZKDatabase</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.zookeeper.server.ZKDatabase</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">ZKDatabase</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">This class maintains the in memory database of zookeeper
 server states that includes the sessions, datatree and the
 committed logs. It is booted up  after reading the logs
 and snapshots from the disk.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#COMMIT_LOG_COUNT" class="member-name-link">COMMIT_LOG_COUNT</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>int</code></div>
<div class="col-second odd-row-color"><code><a href="#commitLogCount" class="member-name-link">commitLogCount</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Queue.html" title="class or interface in java.util" class="external-link">Queue</a>&lt;<a href="quorum/Leader.Proposal.html" title="class in org.apache.zookeeper.server.quorum">Leader.Proposal</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#committedLog" class="member-name-link">committedLog</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a></code></div>
<div class="col-second odd-row-color"><code><a href="#dataTree" class="member-name-link">dataTree</a></code></div>
<div class="col-last odd-row-color">
<div class="block">make sure on a clear you take care of
 all these members.</div>
</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_COMMIT_LOG_COUNT" class="member-name-link">DEFAULT_COMMIT_LOG_COUNT</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final double</code></div>
<div class="col-second odd-row-color"><code><a href="#DEFAULT_SNAPSHOT_SIZE_FACTOR" class="member-name-link">DEFAULT_SNAPSHOT_SIZE_FACTOR</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html" title="class or interface in java.util.concurrent.locks" class="external-link">ReentrantReadWriteLock</a></code></div>
<div class="col-second even-row-color"><code><a href="#logLock" class="member-name-link">logLock</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected long</code></div>
<div class="col-second odd-row-color"><code><a href="#maxCommittedLog" class="member-name-link">maxCommittedLog</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected long</code></div>
<div class="col-second even-row-color"><code><a href="#minCommittedLog" class="member-name-link">minCommittedLog</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#sessionsWithTimeouts" class="member-name-link">sessionsWithTimeouts</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>protected <a href="persistence/FileTxnSnapLog.html" title="class in org.apache.zookeeper.server.persistence">FileTxnSnapLog</a></code></div>
<div class="col-second even-row-color"><code><a href="#snapLog" class="member-name-link">snapLog</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#SNAPSHOT_SIZE_FACTOR" class="member-name-link">SNAPSHOT_SIZE_FACTOR</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Default value is to use snapshot if txnlog size exceeds 1/3 the size of snapshot</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(org.apache.zookeeper.server.persistence.FileTxnSnapLog)" class="member-name-link">ZKDatabase</a><wbr>(<a href="persistence/FileTxnSnapLog.html" title="class in org.apache.zookeeper.server.persistence">FileTxnSnapLog</a>&nbsp;snapLog)</code></div>
<div class="col-last even-row-color">
<div class="block">the filetxnsnaplog that this zk database
 maps to.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/ACL.html" title="class or interface in org.apache.zookeeper.data" class="external-link">ACL</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#aclForNode(org.apache.zookeeper.server.DataNode)" class="member-name-link">aclForNode</a><wbr>(<a href="DataNode.html" title="class in org.apache.zookeeper.server">DataNode</a>&nbsp;n)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addCommittedProposal(org.apache.zookeeper.server.Request)" class="member-name-link">addCommittedProposal</a><wbr>(<a href="Request.html" title="class in org.apache.zookeeper.server">Request</a>&nbsp;request)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">maintains a list of last <i>committedLog</i>
  or so committed requests.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addWatch(java.lang.String,org.apache.zookeeper.Watcher,int)" class="member-name-link">addWatch</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;basePath,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher,
 int&nbsp;mode)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Add a watch</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#append(org.apache.zookeeper.server.Request)" class="member-name-link">append</a><wbr>(<a href="Request.html" title="class in org.apache.zookeeper.server">Request</a>&nbsp;si)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">append to the underlying transaction log</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#calculateTxnLogSizeLimit()" class="member-name-link">calculateTxnLogSizeLimit</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clear()" class="member-name-link">clear</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">clear the zkdatabase.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#close()" class="member-name-link">close</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">close this database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#commit()" class="member-name-link">commit</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">commit to the underlying transaction log</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#compareDigest(org.apache.zookeeper.txn.TxnHeader,org.apache.jute.Record,org.apache.zookeeper.txn.TxnDigest)" class="member-name-link">compareDigest</a><wbr>(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnHeader.html" title="class or interface in org.apache.zookeeper.txn" class="external-link">TxnHeader</a>&nbsp;header,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/Record.html" title="class or interface in org.apache.jute" class="external-link">Record</a>&nbsp;txn,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnDigest.html" title="class or interface in org.apache.zookeeper.txn" class="external-link">TxnDigest</a>&nbsp;digest)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#containsWatcher(java.lang.String,org.apache.zookeeper.Watcher.WatcherType,org.apache.zookeeper.Watcher)" class="member-name-link">containsWatcher</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="../Watcher.WatcherType.html" title="enum in org.apache.zookeeper">Watcher.WatcherType</a>&nbsp;type,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Check whether the given watcher exists in datatree</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createDataTree()" class="member-name-link">createDataTree</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deserializeSnapshot(org.apache.jute.InputArchive)" class="member-name-link">deserializeSnapshot</a><wbr>(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/InputArchive.html" title="class or interface in org.apache.jute" class="external-link">InputArchive</a>&nbsp;ia)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">deserialize a snapshot from an input archive</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deserializeSnapshot(org.apache.jute.InputArchive,java.util.zip.CheckedInputStream)" class="member-name-link">deserializeSnapshot</a><wbr>(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/InputArchive.html" title="class or interface in org.apache.jute" class="external-link">InputArchive</a>&nbsp;ia,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/zip/CheckedInputStream.html" title="class or interface in java.util.zip" class="external-link">CheckedInputStream</a>&nbsp;is)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deserialize a snapshot that contains FileHeader from an input archive.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#dumpEphemerals(java.io.PrintWriter)" class="member-name-link">dumpEphemerals</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/PrintWriter.html" title="class or interface in java.io" class="external-link">PrintWriter</a>&nbsp;pwriter)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">write a text dump of all the ephemerals in the datatree</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#fastForwardDataBase()" class="member-name-link">fastForwardDataBase</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Fast-forward the database adding transactions from the committed log into memory.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/ACL.html" title="class or interface in org.apache.zookeeper.data" class="external-link">ACL</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getACL(java.lang.String,org.apache.zookeeper.data.Stat)" class="member-name-link">getACL</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/Stat.html" title="class or interface in org.apache.zookeeper.data" class="external-link">Stat</a>&nbsp;stat)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">get acl for a path</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAclSize()" class="member-name-link">getAclSize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">get the acl size of the datatree</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAllChildrenNumber(java.lang.String)" class="member-name-link">getAllChildrenNumber</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getChildren(java.lang.String,org.apache.zookeeper.data.Stat,org.apache.zookeeper.Watcher)" class="member-name-link">getChildren</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/Stat.html" title="class or interface in org.apache.zookeeper.data" class="external-link">Stat</a>&nbsp;stat,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">get children list for this path</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="quorum/Leader.Proposal.html" title="class in org.apache.zookeeper.server.quorum">Leader.Proposal</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getCommittedLog()" class="member-name-link">getCommittedLog</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>byte[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getData(java.lang.String,org.apache.zookeeper.data.Stat,org.apache.zookeeper.Watcher)" class="member-name-link">getData</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/Stat.html" title="class or interface in org.apache.zookeeper.data" class="external-link">Stat</a>&nbsp;stat,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">get data and stat for a path</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDataTree()" class="member-name-link">getDataTree</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">the datatree for this zkdatabase</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getDataTreeLastProcessedZxid()" class="member-name-link">getDataTreeLastProcessedZxid</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">get the last processed zxid from a datatree</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getEphemerals()" class="member-name-link">getEphemerals</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getEphemerals(long)" class="member-name-link">getEphemerals</a><wbr>(long&nbsp;sessionId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">the paths for  ephemeral session id</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html" title="class or interface in java.util.concurrent.locks" class="external-link">ReentrantReadWriteLock</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLogLock()" class="member-name-link">getLogLock</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the lock that controls the committedLog.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getmaxCommittedLog()" class="member-name-link">getmaxCommittedLog</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">the committed log for this zk database</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getminCommittedLog()" class="member-name-link">getminCommittedLog</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">the minimum committed transaction log
 available in memory</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DataNode.html" title="class in org.apache.zookeeper.server">DataNode</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNode(java.lang.String)" class="member-name-link">getNode</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">get the datanode for this path</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getNodeCount()" class="member-name-link">getNodeCount</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">the node count of the datatree</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;<a href="quorum/Leader.Proposal.html" title="class in org.apache.zookeeper.server.quorum">Leader.Proposal</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getProposalsFromTxnLog(long,long)" class="member-name-link">getProposalsFromTxnLog</a><wbr>(long&nbsp;startZxid,
 long&nbsp;sizeLimit)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get proposals from txnlog.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSessionCount()" class="member-name-link">getSessionCount</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSessions()" class="member-name-link">getSessions</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">return the sessions in the datatree</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSessionWithTimeOuts()" class="member-name-link">getSessionWithTimeOuts</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">get sessions with timeouts</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTxnCount()" class="member-name-link">getTxnCount</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the number of txn since last snapshot</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTxnSize()" class="member-name-link">getTxnSize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the size of txn since last snapshot</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#initConfigInZKDatabase(org.apache.zookeeper.server.quorum.flexible.QuorumVerifier)" class="member-name-link">initConfigInZKDatabase</a><wbr>(<a href="quorum/flexible/QuorumVerifier.html" title="interface in org.apache.zookeeper.server.quorum.flexible">QuorumVerifier</a>&nbsp;qv)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isInitialized()" class="member-name-link">isInitialized</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">checks to see if the zk database has been
 initialized or not.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isSpecialPath(java.lang.String)" class="member-name-link">isSpecialPath</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">check if the path is special or not</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isTxnLogSyncEnabled()" class="member-name-link">isTxnLogSyncEnabled</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#killSession(long,long)" class="member-name-link">killSession</a><wbr>(long&nbsp;sessionId,
 long&nbsp;zxid)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">kill a given session in the datatree</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#loadDataBase()" class="member-name-link">loadDataBase</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">load the database from the disk onto memory and also add
 the transactions to the committedlog in memory.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="DataTree.ProcessTxnResult.html" title="class in org.apache.zookeeper.server">DataTree.ProcessTxnResult</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#processTxn(org.apache.zookeeper.txn.TxnHeader,org.apache.jute.Record,org.apache.zookeeper.txn.TxnDigest)" class="member-name-link">processTxn</a><wbr>(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnHeader.html" title="class or interface in org.apache.zookeeper.txn" class="external-link">TxnHeader</a>&nbsp;hdr,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/Record.html" title="class or interface in org.apache.jute" class="external-link">Record</a>&nbsp;txn,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnDigest.html" title="class or interface in org.apache.zookeeper.txn" class="external-link">TxnDigest</a>&nbsp;digest)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">the process txn on the data and perform digest comparison.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeCnxn(org.apache.zookeeper.server.ServerCnxn)" class="member-name-link">removeCnxn</a><wbr>(<a href="ServerCnxn.html" title="class in org.apache.zookeeper.server">ServerCnxn</a>&nbsp;cnxn)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">remove a cnxn from the datatree</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeWatch(java.lang.String,org.apache.zookeeper.Watcher.WatcherType,org.apache.zookeeper.Watcher)" class="member-name-link">removeWatch</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="../Watcher.WatcherType.html" title="enum in org.apache.zookeeper">Watcher.WatcherType</a>&nbsp;type,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Remove watch from the datatree</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#resetTxnCount()" class="member-name-link">resetTxnCount</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Reset the number of txn since last rollLog</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#rollLog()" class="member-name-link">rollLog</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">roll the underlying log</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#serializeSnapshot(org.apache.jute.OutputArchive)" class="member-name-link">serializeSnapshot</a><wbr>(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/OutputArchive.html" title="class or interface in org.apache.jute" class="external-link">OutputArchive</a>&nbsp;oa)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">serialize the snapshot</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setlastProcessedZxid(long)" class="member-name-link">setlastProcessedZxid</a><wbr>(long&nbsp;zxid)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">the last processed zxid in the datatree</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSnapshotSizeFactor(double)" class="member-name-link">setSnapshotSizeFactor</a><wbr>(double&nbsp;snapshotSizeFactor)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Use for unit testing, so we can turn this feature on/off</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setWatches(long,java.util.List,java.util.List,java.util.List,java.util.List,java.util.List,org.apache.zookeeper.Watcher)" class="member-name-link">setWatches</a><wbr>(long&nbsp;relativeZxid,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;dataWatches,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;existWatches,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;childWatches,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;persistentWatches,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;persistentRecursiveWatches,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">set watches on the datatree</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/Stat.html" title="class or interface in org.apache.zookeeper.data" class="external-link">Stat</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#statNode(java.lang.String,org.apache.zookeeper.server.ServerCnxn)" class="member-name-link">statNode</a><wbr>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="ServerCnxn.html" title="class in org.apache.zookeeper.server">ServerCnxn</a>&nbsp;serverCnxn)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">stat the path</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#truncateLog(long)" class="member-name-link">truncateLog</a><wbr>(long&nbsp;zxid)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Truncate the ZKDatabase to the specified zxid</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="dataTree">
<h3>dataTree</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a></span>&nbsp;<span class="element-name">dataTree</span></div>
<div class="block">make sure on a clear you take care of
 all these members.</div>
</section>
</li>
<li>
<section class="detail" id="sessionsWithTimeouts">
<h3>sessionsWithTimeouts</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name">sessionsWithTimeouts</span></div>
</section>
</li>
<li>
<section class="detail" id="snapLog">
<h3>snapLog</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="persistence/FileTxnSnapLog.html" title="class in org.apache.zookeeper.server.persistence">FileTxnSnapLog</a></span>&nbsp;<span class="element-name">snapLog</span></div>
</section>
</li>
<li>
<section class="detail" id="minCommittedLog">
<h3>minCommittedLog</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">minCommittedLog</span></div>
</section>
</li>
<li>
<section class="detail" id="maxCommittedLog">
<h3>maxCommittedLog</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">maxCommittedLog</span></div>
</section>
</li>
<li>
<section class="detail" id="SNAPSHOT_SIZE_FACTOR">
<h3>SNAPSHOT_SIZE_FACTOR</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">SNAPSHOT_SIZE_FACTOR</span></div>
<div class="block">Default value is to use snapshot if txnlog size exceeds 1/3 the size of snapshot</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.zookeeper.server.ZKDatabase.SNAPSHOT_SIZE_FACTOR">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_SNAPSHOT_SIZE_FACTOR">
<h3>DEFAULT_SNAPSHOT_SIZE_FACTOR</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">DEFAULT_SNAPSHOT_SIZE_FACTOR</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.zookeeper.server.ZKDatabase.DEFAULT_SNAPSHOT_SIZE_FACTOR">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="COMMIT_LOG_COUNT">
<h3>COMMIT_LOG_COUNT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">COMMIT_LOG_COUNT</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.zookeeper.server.ZKDatabase.COMMIT_LOG_COUNT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_COMMIT_LOG_COUNT">
<h3>DEFAULT_COMMIT_LOG_COUNT</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">DEFAULT_COMMIT_LOG_COUNT</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#org.apache.zookeeper.server.ZKDatabase.DEFAULT_COMMIT_LOG_COUNT">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="commitLogCount">
<h3>commitLogCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">commitLogCount</span></div>
</section>
</li>
<li>
<section class="detail" id="committedLog">
<h3>committedLog</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Queue.html" title="class or interface in java.util" class="external-link">Queue</a>&lt;<a href="quorum/Leader.Proposal.html" title="class in org.apache.zookeeper.server.quorum">Leader.Proposal</a>&gt;</span>&nbsp;<span class="element-name">committedLog</span></div>
</section>
</li>
<li>
<section class="detail" id="logLock">
<h3>logLock</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html" title="class or interface in java.util.concurrent.locks" class="external-link">ReentrantReadWriteLock</a></span>&nbsp;<span class="element-name">logLock</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(org.apache.zookeeper.server.persistence.FileTxnSnapLog)">
<h3>ZKDatabase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">ZKDatabase</span><wbr><span class="parameters">(<a href="persistence/FileTxnSnapLog.html" title="class in org.apache.zookeeper.server.persistence">FileTxnSnapLog</a>&nbsp;snapLog)</span></div>
<div class="block">the filetxnsnaplog that this zk database
 maps to. There is a one to one relationship
 between a filetxnsnaplog and zkdatabase.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>snapLog</code> - the FileTxnSnapLog mapping this zkdatabase</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="isInitialized()">
<h3>isInitialized</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isInitialized</span>()</div>
<div class="block">checks to see if the zk database has been
 initialized or not.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>true if zk database is initialized and false if not</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="clear()">
<h3>clear</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">clear</span>()</div>
<div class="block">clear the zkdatabase.
 Note to developers - be careful to see that
 the clear method does clear out all the
 data structures in zkdatabase.</div>
</section>
</li>
<li>
<section class="detail" id="getDataTree()">
<h3>getDataTree</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a></span>&nbsp;<span class="element-name">getDataTree</span>()</div>
<div class="block">the datatree for this zkdatabase</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the datatree for this zkdatabase</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getmaxCommittedLog()">
<h3>getmaxCommittedLog</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getmaxCommittedLog</span>()</div>
<div class="block">the committed log for this zk database</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the committed log for this zkdatabase</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getminCommittedLog()">
<h3>getminCommittedLog</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getminCommittedLog</span>()</div>
<div class="block">the minimum committed transaction log
 available in memory</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the minimum committed transaction
 log available in memory</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLogLock()">
<h3>getLogLock</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html" title="class or interface in java.util.concurrent.locks" class="external-link">ReentrantReadWriteLock</a></span>&nbsp;<span class="element-name">getLogLock</span>()</div>
<div class="block">Get the lock that controls the committedLog. If you want to get the pointer to the committedLog, you need
 to use this lock to acquire a read lock before calling getCommittedLog()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the lock that controls the committed log</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getCommittedLog()">
<h3>getCommittedLog</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="quorum/Leader.Proposal.html" title="class in org.apache.zookeeper.server.quorum">Leader.Proposal</a>&gt;</span>&nbsp;<span class="element-name">getCommittedLog</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getDataTreeLastProcessedZxid()">
<h3>getDataTreeLastProcessedZxid</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getDataTreeLastProcessedZxid</span>()</div>
<div class="block">get the last processed zxid from a datatree</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the last processed zxid of a datatree</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSessions()">
<h3>getSessions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&gt;</span>&nbsp;<span class="element-name">getSessions</span>()</div>
<div class="block">return the sessions in the datatree</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the data tree sessions</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSessionCount()">
<h3>getSessionCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getSessionCount</span>()</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>number of (global) sessions</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSessionWithTimeOuts()">
<h3>getSessionWithTimeOuts</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html" title="class or interface in java.util.concurrent" class="external-link">ConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name">getSessionWithTimeOuts</span>()</div>
<div class="block">get sessions with timeouts</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the hashmap of sessions with timeouts</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="loadDataBase()">
<h3>loadDataBase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">loadDataBase</span>()
                  throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">load the database from the disk onto memory and also add
 the transactions to the committedlog in memory.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the last valid zxid on disk</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="fastForwardDataBase()">
<h3>fastForwardDataBase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">fastForwardDataBase</span>()
                         throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Fast-forward the database adding transactions from the committed log into memory.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the last valid zxid.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addCommittedProposal(org.apache.zookeeper.server.Request)">
<h3>addCommittedProposal</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addCommittedProposal</span><wbr><span class="parameters">(<a href="Request.html" title="class in org.apache.zookeeper.server">Request</a>&nbsp;request)</span></div>
<div class="block">maintains a list of last <i>committedLog</i>
  or so committed requests. This is used for
 fast follower synchronization.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>request</code> - committed request</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isTxnLogSyncEnabled()">
<h3>isTxnLogSyncEnabled</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isTxnLogSyncEnabled</span>()</div>
</section>
</li>
<li>
<section class="detail" id="calculateTxnLogSizeLimit()">
<h3>calculateTxnLogSizeLimit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">calculateTxnLogSizeLimit</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getProposalsFromTxnLog(long,long)">
<h3>getProposalsFromTxnLog</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html" title="class or interface in java.util" class="external-link">Iterator</a>&lt;<a href="quorum/Leader.Proposal.html" title="class in org.apache.zookeeper.server.quorum">Leader.Proposal</a>&gt;</span>&nbsp;<span class="element-name">getProposalsFromTxnLog</span><wbr><span class="parameters">(long&nbsp;startZxid,
 long&nbsp;sizeLimit)</span></div>
<div class="block">Get proposals from txnlog. Only packet part of proposal is populated.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>startZxid</code> - the starting zxid of the proposal</dd>
<dd><code>sizeLimit</code> - maximum on-disk size of txnlog to fetch
                  0 is unlimited, negative value means disable.</dd>
<dt>Returns:</dt>
<dd>list of proposal (request part of each proposal is null)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="aclForNode(org.apache.zookeeper.server.DataNode)">
<h3>aclForNode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/ACL.html" title="class or interface in org.apache.zookeeper.data" class="external-link">ACL</a>&gt;</span>&nbsp;<span class="element-name">aclForNode</span><wbr><span class="parameters">(<a href="DataNode.html" title="class in org.apache.zookeeper.server">DataNode</a>&nbsp;n)</span></div>
</section>
</li>
<li>
<section class="detail" id="removeCnxn(org.apache.zookeeper.server.ServerCnxn)">
<h3>removeCnxn</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">removeCnxn</span><wbr><span class="parameters">(<a href="ServerCnxn.html" title="class in org.apache.zookeeper.server">ServerCnxn</a>&nbsp;cnxn)</span></div>
<div class="block">remove a cnxn from the datatree</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>cnxn</code> - the cnxn to remove from the datatree</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="killSession(long,long)">
<h3>killSession</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">killSession</span><wbr><span class="parameters">(long&nbsp;sessionId,
 long&nbsp;zxid)</span></div>
<div class="block">kill a given session in the datatree</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sessionId</code> - the session id to be killed</dd>
<dd><code>zxid</code> - the zxid of kill session transaction</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="dumpEphemerals(java.io.PrintWriter)">
<h3>dumpEphemerals</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">dumpEphemerals</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/PrintWriter.html" title="class or interface in java.io" class="external-link">PrintWriter</a>&nbsp;pwriter)</span></div>
<div class="block">write a text dump of all the ephemerals in the datatree</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pwriter</code> - the output to write to</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEphemerals()">
<h3>getEphemerals</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&gt;</span>&nbsp;<span class="element-name">getEphemerals</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getNodeCount()">
<h3>getNodeCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getNodeCount</span>()</div>
<div class="block">the node count of the datatree</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the node count of datatree</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEphemerals(long)">
<h3>getEphemerals</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getEphemerals</span><wbr><span class="parameters">(long&nbsp;sessionId)</span></div>
<div class="block">the paths for  ephemeral session id</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>sessionId</code> - the session id for which paths match to</dd>
<dt>Returns:</dt>
<dd>the paths for a session id</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setlastProcessedZxid(long)">
<h3>setlastProcessedZxid</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setlastProcessedZxid</span><wbr><span class="parameters">(long&nbsp;zxid)</span></div>
<div class="block">the last processed zxid in the datatree</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>zxid</code> - the last processed zxid in the datatree</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="processTxn(org.apache.zookeeper.txn.TxnHeader,org.apache.jute.Record,org.apache.zookeeper.txn.TxnDigest)">
<h3>processTxn</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DataTree.ProcessTxnResult.html" title="class in org.apache.zookeeper.server">DataTree.ProcessTxnResult</a></span>&nbsp;<span class="element-name">processTxn</span><wbr><span class="parameters">(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnHeader.html" title="class or interface in org.apache.zookeeper.txn" class="external-link">TxnHeader</a>&nbsp;hdr,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/Record.html" title="class or interface in org.apache.jute" class="external-link">Record</a>&nbsp;txn,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnDigest.html" title="class or interface in org.apache.zookeeper.txn" class="external-link">TxnDigest</a>&nbsp;digest)</span></div>
<div class="block">the process txn on the data and perform digest comparison.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>hdr</code> - the txnheader for the txn</dd>
<dd><code>txn</code> - the transaction that needs to be processed</dd>
<dd><code>digest</code> - the expected digest. A null value would skip the check</dd>
<dt>Returns:</dt>
<dd>the result of processing the transaction on this
 datatree/zkdatabase</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="statNode(java.lang.String,org.apache.zookeeper.server.ServerCnxn)">
<h3>statNode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/Stat.html" title="class or interface in org.apache.zookeeper.data" class="external-link">Stat</a></span>&nbsp;<span class="element-name">statNode</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="ServerCnxn.html" title="class in org.apache.zookeeper.server">ServerCnxn</a>&nbsp;serverCnxn)</span>
              throws <span class="exceptions"><a href="../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></span></div>
<div class="block">stat the path</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - the path for which stat is to be done</dd>
<dd><code>serverCnxn</code> - the servercnxn attached to this request</dd>
<dt>Returns:</dt>
<dd>the stat of this node</dd>
<dt>Throws:</dt>
<dd><code><a href="../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getNode(java.lang.String)">
<h3>getNode</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DataNode.html" title="class in org.apache.zookeeper.server">DataNode</a></span>&nbsp;<span class="element-name">getNode</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path)</span></div>
<div class="block">get the datanode for this path</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - the path to lookup</dd>
<dt>Returns:</dt>
<dd>the datanode for getting the path</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getData(java.lang.String,org.apache.zookeeper.data.Stat,org.apache.zookeeper.Watcher)">
<h3>getData</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name">getData</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/Stat.html" title="class or interface in org.apache.zookeeper.data" class="external-link">Stat</a>&nbsp;stat,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</span>
               throws <span class="exceptions"><a href="../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></span></div>
<div class="block">get data and stat for a path</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - the path being queried</dd>
<dd><code>stat</code> - the stat for this path</dd>
<dd><code>watcher</code> - the watcher function</dd>
<dt>Throws:</dt>
<dd><code><a href="../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setWatches(long,java.util.List,java.util.List,java.util.List,java.util.List,java.util.List,org.apache.zookeeper.Watcher)">
<h3>setWatches</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setWatches</span><wbr><span class="parameters">(long&nbsp;relativeZxid,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;dataWatches,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;existWatches,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;childWatches,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;persistentWatches,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;persistentRecursiveWatches,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</span></div>
<div class="block">set watches on the datatree</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>relativeZxid</code> - the relative zxid that client has seen</dd>
<dd><code>dataWatches</code> - the data watches the client wants to reset</dd>
<dd><code>existWatches</code> - the exists watches the client wants to reset</dd>
<dd><code>childWatches</code> - the child watches the client wants to reset</dd>
<dd><code>persistentWatches</code> - the persistent watches the client wants to reset</dd>
<dd><code>persistentRecursiveWatches</code> - the persistent recursive watches the client wants to reset</dd>
<dd><code>watcher</code> - the watcher function</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addWatch(java.lang.String,org.apache.zookeeper.Watcher,int)">
<h3>addWatch</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addWatch</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;basePath,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher,
 int&nbsp;mode)</span></div>
<div class="block">Add a watch</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>basePath</code> - watch base</dd>
<dd><code>watcher</code> - the watcher</dd>
<dd><code>mode</code> - a mode from ZooDefs.AddWatchModes</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getACL(java.lang.String,org.apache.zookeeper.data.Stat)">
<h3>getACL</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/ACL.html" title="class or interface in org.apache.zookeeper.data" class="external-link">ACL</a>&gt;</span>&nbsp;<span class="element-name">getACL</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/Stat.html" title="class or interface in org.apache.zookeeper.data" class="external-link">Stat</a>&nbsp;stat)</span>
                 throws <span class="exceptions"><a href="../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></span></div>
<div class="block">get acl for a path</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - the path to query for acl</dd>
<dd><code>stat</code> - the stat for the node</dd>
<dt>Returns:</dt>
<dd>the acl list for this path</dd>
<dt>Throws:</dt>
<dd><code><a href="../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getChildren(java.lang.String,org.apache.zookeeper.data.Stat,org.apache.zookeeper.Watcher)">
<h3>getChildren</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getChildren</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/data/Stat.html" title="class or interface in org.apache.zookeeper.data" class="external-link">Stat</a>&nbsp;stat,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</span>
                         throws <span class="exceptions"><a href="../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></span></div>
<div class="block">get children list for this path</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - the path of the node</dd>
<dd><code>stat</code> - the stat of the node</dd>
<dd><code>watcher</code> - the watcher function for this path</dd>
<dt>Returns:</dt>
<dd>the list of children for this path</dd>
<dt>Throws:</dt>
<dd><code><a href="../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAllChildrenNumber(java.lang.String)">
<h3>getAllChildrenNumber</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getAllChildrenNumber</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path)</span>
                         throws <span class="exceptions"><a href="../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../KeeperException.NoNodeException.html" title="class in org.apache.zookeeper">KeeperException.NoNodeException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isSpecialPath(java.lang.String)">
<h3>isSpecialPath</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isSpecialPath</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path)</span></div>
<div class="block">check if the path is special or not</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - the input path</dd>
<dt>Returns:</dt>
<dd>true if path is special and false if not</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAclSize()">
<h3>getAclSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getAclSize</span>()</div>
<div class="block">get the acl size of the datatree</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the acl size of the datatree</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="truncateLog(long)">
<h3>truncateLog</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">truncateLog</span><wbr><span class="parameters">(long&nbsp;zxid)</span>
                    throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Truncate the ZKDatabase to the specified zxid</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>zxid</code> - the zxid to truncate zk database to</dd>
<dt>Returns:</dt>
<dd>true if the truncate is successful and false if not</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deserializeSnapshot(org.apache.jute.InputArchive)">
<h3>deserializeSnapshot</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deserializeSnapshot</span><wbr><span class="parameters">(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/InputArchive.html" title="class or interface in org.apache.jute" class="external-link">InputArchive</a>&nbsp;ia)</span>
                         throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">deserialize a snapshot from an input archive</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>ia</code> - the input archive you want to deserialize from</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deserializeSnapshot(org.apache.jute.InputArchive,java.util.zip.CheckedInputStream)">
<h3>deserializeSnapshot</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deserializeSnapshot</span><wbr><span class="parameters">(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/InputArchive.html" title="class or interface in org.apache.jute" class="external-link">InputArchive</a>&nbsp;ia,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/zip/CheckedInputStream.html" title="class or interface in java.util.zip" class="external-link">CheckedInputStream</a>&nbsp;is)</span>
                         throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Deserialize a snapshot that contains FileHeader from an input archive. It is used by
 the admin restore command.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>ia</code> - the input archive to deserialize from</dd>
<dd><code>is</code> - the CheckInputStream to check integrity</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="serializeSnapshot(org.apache.jute.OutputArchive)">
<h3>serializeSnapshot</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">serializeSnapshot</span><wbr><span class="parameters">(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/OutputArchive.html" title="class or interface in org.apache.jute" class="external-link">OutputArchive</a>&nbsp;oa)</span>
                       throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a>,
<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></span></div>
<div class="block">serialize the snapshot</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>oa</code> - the output archive to which the snapshot needs to be serialized</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/InterruptedException.html" title="class or interface in java.lang" class="external-link">InterruptedException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="append(org.apache.zookeeper.server.Request)">
<h3>append</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">append</span><wbr><span class="parameters">(<a href="Request.html" title="class in org.apache.zookeeper.server">Request</a>&nbsp;si)</span>
               throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">append to the underlying transaction log</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>si</code> - the request to append</dd>
<dt>Returns:</dt>
<dd>true if the append was successful and false if not</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rollLog()">
<h3>rollLog</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">rollLog</span>()
             throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">roll the underlying log</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="commit()">
<h3>commit</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">commit</span>()
            throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">commit to the underlying transaction log</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="close()">
<h3>close</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">close</span>()
           throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">close this database. free the resources</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="initConfigInZKDatabase(org.apache.zookeeper.server.quorum.flexible.QuorumVerifier)">
<h3>initConfigInZKDatabase</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">initConfigInZKDatabase</span><wbr><span class="parameters">(<a href="quorum/flexible/QuorumVerifier.html" title="interface in org.apache.zookeeper.server.quorum.flexible">QuorumVerifier</a>&nbsp;qv)</span></div>
</section>
</li>
<li>
<section class="detail" id="setSnapshotSizeFactor(double)">
<h3>setSnapshotSizeFactor</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setSnapshotSizeFactor</span><wbr><span class="parameters">(double&nbsp;snapshotSizeFactor)</span></div>
<div class="block">Use for unit testing, so we can turn this feature on/off</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>snapshotSizeFactor</code> - Set to minus value to turn this off.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="containsWatcher(java.lang.String,org.apache.zookeeper.Watcher.WatcherType,org.apache.zookeeper.Watcher)">
<h3>containsWatcher</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">containsWatcher</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="../Watcher.WatcherType.html" title="enum in org.apache.zookeeper">Watcher.WatcherType</a>&nbsp;type,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</span></div>
<div class="block">Check whether the given watcher exists in datatree</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - node to check watcher existence</dd>
<dd><code>type</code> - type of watcher</dd>
<dd><code>watcher</code> - watcher function</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeWatch(java.lang.String,org.apache.zookeeper.Watcher.WatcherType,org.apache.zookeeper.Watcher)">
<h3>removeWatch</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">removeWatch</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;path,
 <a href="../Watcher.WatcherType.html" title="enum in org.apache.zookeeper">Watcher.WatcherType</a>&nbsp;type,
 <a href="../Watcher.html" title="interface in org.apache.zookeeper">Watcher</a>&nbsp;watcher)</span></div>
<div class="block">Remove watch from the datatree</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>path</code> - node to remove watches from</dd>
<dd><code>type</code> - type of watcher to remove</dd>
<dd><code>watcher</code> - watcher function to remove</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createDataTree()">
<h3>createDataTree</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="DataTree.html" title="class in org.apache.zookeeper.server">DataTree</a></span>&nbsp;<span class="element-name">createDataTree</span>()</div>
</section>
</li>
<li>
<section class="detail" id="resetTxnCount()">
<h3>resetTxnCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">resetTxnCount</span>()</div>
<div class="block">Reset the number of txn since last rollLog</div>
</section>
</li>
<li>
<section class="detail" id="getTxnCount()">
<h3>getTxnCount</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getTxnCount</span>()</div>
<div class="block">Get the number of txn since last snapshot</div>
</section>
</li>
<li>
<section class="detail" id="getTxnSize()">
<h3>getTxnSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getTxnSize</span>()</div>
<div class="block">Get the size of txn since last snapshot</div>
</section>
</li>
<li>
<section class="detail" id="compareDigest(org.apache.zookeeper.txn.TxnHeader,org.apache.jute.Record,org.apache.zookeeper.txn.TxnDigest)">
<h3>compareDigest</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">compareDigest</span><wbr><span class="parameters">(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnHeader.html" title="class or interface in org.apache.zookeeper.txn" class="external-link">TxnHeader</a>&nbsp;header,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/Record.html" title="class or interface in org.apache.jute" class="external-link">Record</a>&nbsp;txn,
 <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnDigest.html" title="class or interface in org.apache.zookeeper.txn" class="external-link">TxnDigest</a>&nbsp;digest)</span></div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2008&#x2013;2025 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
